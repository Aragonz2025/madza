# Madza AI Healthcare Platform - AWS Architecture Diagram

## AWS Infrastructure Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                    AWS CLOUD (us-east-1)                                   │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                              CONTENT DELIVERY                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                        CloudFront CDN (Planned)                             │  │  │
│  │  │  - Global Content Delivery                                                  │  │  │
│  │  │  - Static Asset Caching                                                     │  │  │
│  │  │  - HTTPS Termination                                                        │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│                                           │ HTTPS                                           │
│                                           ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                                FRONTEND LAYER                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                           Amazon S3 Bucket                                  │  │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────┐  │  │  │
│  │  │  │                    React Frontend Application                       │  │  │  │
│  │  │  │  - Patient Registration UI                                          │  │  │  │
│  │  │  │  - Claim Processing Interface                                       │  │  │  │
│  │  │  │  - Dashboard & Analytics                                            │  │  │  │
│  │  │  │  - Interactive Chatbot                                              │  │  │  │
│  │  │  │  - EOB Management                                                   │  │  │  │
│  │  │  └─────────────────────────────────────────────────────────────────────┘  │  │  │
│  │  │  - Static Website Hosting                                                   │  │  │
│  │  │  - Public Read Access                                                       │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│                                           │ API Calls (HTTP/HTTPS)                         │
│                                           ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                                 NETWORK LAYER                                       │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                              VPC (Virtual Private Cloud)                    │  │  │
│  │  │  CIDR: 10.0.0.0/16                                                          │  │  │
│  │  │                                                                              │  │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────┐  │  │  │
│  │  │  │                    Public Subnet (10.0.1.0/24)                     │  │  │  │
│  │  │  │                                                                      │  │  │  │
│  │  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │                    Internet Gateway                         │  │  │  │  │
│  │  │  │  │  - Public Internet Access                                   │  │  │  │  │
│  │  │  │  │  - Route Table Configuration                                │  │  │  │  │
│  │  │  │  └─────────────────────────────────────────────────────────────┘  │  │  │  │
│  │  │  │                                │                                   │  │  │  │
│  │  │  │                                ▼                                   │  │  │  │
│  │  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │                   Security Group                            │  │  │  │  │
│  │  │  │  │  - HTTP (80) - Inbound                                      │  │  │  │  │
│  │  │  │  │  - HTTPS (443) - Inbound                                    │  │  │  │  │
│  │  │  │  │  - Custom (5001) - Flask API                                │  │  │  │  │
│  │  │  │  │  - SSH (22) - Admin Access                                  │  │  │  │  │
│  │  │  │  └─────────────────────────────────────────────────────────────┘  │  │  │  │
│  │  │  └─────────────────────────────────────────────────────────────────────┘  │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│                                           ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                               COMPUTE LAYER                                         │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                          EC2 Instance (t3.micro)                            │  │  │
│  │  │  - 1 vCPU, 1GB RAM                                                          │  │  │
│  │  │  - Amazon Linux 2                                                           │  │  │
│  │  │  - Public IP: Elastic IP (Optional)                                        │  │  │
│  │  │                                                                              │  │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────┐  │  │  │
│  │  │  │                    Application Layer                                │  │  │  │
│  │  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │                Flask REST API (Port 5001)                  │  │  │  │  │
│  │  │  │  │  - Authentication & Authorization                           │  │  │  │  │
│  │  │  │  │  - Request Routing & Validation                             │  │  │  │  │
│  │  │  │  │  - CORS Handling                                            │  │  │  │  │
│  │  │  │  │  - Rate Limiting                                             │  │  │  │  │
│  │  │  │  │  - Gunicorn WSGI Server                                     │  │  │  │  │
│  │  │  │  │  - systemd Service Management                               │  │  │  │  │
│  │  │  │  └─────────────────────────────────────────────────────────────┘  │  │  │  │
│  │  │  │                                                                  │  │  │  │
│  │  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │                Business Logic Services                     │  │  │  │  │
│  │  │  │  │  - Patient Service                                          │  │  │  │  │
│  │  │  │  │  - Claim Service                                            │  │  │  │  │
│  │  │  │  │  - EOB Service                                              │  │  │  │  │
│  │  │  │  │  - Bedrock AI Service                                       │  │  │  │  │
│  │  │  │  └─────────────────────────────────────────────────────────────┘  │  │  │  │
│  │  │  └─────────────────────────────────────────────────────────────────────┘  │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│                                           ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                               STORAGE LAYER                                         │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                            EBS Volume                                       │  │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────┐  │  │  │
│  │  │  │                      SQLite Database                               │  │  │  │
│  │  │  │  - healthcare.db                                                   │  │  │  │
│  │  │  │  - Patients Table                                                  │  │  │  │
│  │  │  │  - Claims Table                                                    │  │  │  │
│  │  │  │  - EOBs Table                                                      │  │  │  │
│  │  │  │  - AI Analysis Storage (JSON)                                     │  │  │  │
│  │  │  │  - Encrypted at Rest                                              │  │  │  │
│  │  │  └─────────────────────────────────────────────────────────────────────┘  │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│                                           │ AI API Calls                                    │
│                                           ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                               AI/ML LAYER                                           │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                           AWS Bedrock                                       │  │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────┐  │  │  │
│  │  │  │                    GPT-OSS-120B Model                              │  │  │  │
│  │  │  │  - Patient Registration Analysis                                   │  │  │  │
│  │  │  │  - Insurance Verification                                          │  │  │  │
│  │  │  │  - Claim Processing & Validation                                   │  │  │  │
│  │  │  │  - Fraud Detection                                                 │  │  │  │
│  │  │  │  - Risk Assessment                                                 │  │  │  │
│  │  │  │  - EOB Generation                                                  │  │  │  │
│  │  │  │  - Chatbot Interactions                                            │  │  │  │
│  │  │  └─────────────────────────────────────────────────────────────────────┘  │  │  │
│  │  │                                                                              │  │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────┐  │  │  │
│  │  │  │                    Bedrock Runtime API                             │  │  │  │
│  │  │  │  - Model Invocation                                                │  │  │  │
│  │  │  │  - Response Processing                                             │  │  │  │
│  │  │  │  - Error Handling                                                  │  │  │  │
│  │  │  └─────────────────────────────────────────────────────────────────────┘  │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                        AWS Lambda (Fallback)                               │  │  │
│  │  │  - Backup AI Processing                                                     │  │  │
│  │  │  - Serverless Compute                                                       │  │  │
│  │  │  - Event-driven Processing                                                  │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                            MONITORING & MANAGEMENT                                  │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                          CloudWatch (Planned)                              │  │  │
│  │  │  - System Metrics                                                           │  │  │
│  │  │  - Application Logs                                                         │  │  │
│  │  │  - Custom Dashboards                                                        │  │  │
│  │  │  - Alerting & Notifications                                                 │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                            IAM (Identity & Access Management)              │  │  │
│  │  │  - EC2 Instance Roles                                                       │  │  │
│  │  │  - Bedrock Access Policies                                                  │  │  │
│  │  │  - S3 Bucket Policies                                                       │  │  │
│  │  │  - Least Privilege Access                                                   │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Architecture

```
┌─────────────────┐    HTTPS/API     ┌─────────────────┐    Bedrock API    ┌─────────────────┐
│                 │    Requests       │                 │    Calls          │                 │
│  React Frontend │ ───────────────► │  Flask Backend  │ ───────────────► │  AWS Bedrock    │
│   (S3 + CDN)    │                  │   (EC2 + EBS)   │                  │  (AI/ML Model)  │
│                 │ ◄─────────────── │                 │ ◄─────────────── │                 │
└─────────────────┘    JSON          └─────────────────┘    AI Analysis   └─────────────────┘
                       Responses              │                   
                                             │ SQLite                      
                                             │ Operations                  
                                             ▼                             
                                    ┌─────────────────┐                    
                                    │                 │                    
                                    │ SQLite Database │                    
                                    │   (EBS Volume)  │                    
                                    │                 │                    
                                    └─────────────────┘                    
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  SECURITY LAYERS                                           │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                              NETWORK SECURITY                                       │  │
│  │  - VPC Isolation                                                                    │  │
│  │  - Security Groups (Firewall Rules)                                                 │  │
│  │  - NACLs (Network Access Control Lists)                                             │  │
│  │  - Internet Gateway (Controlled Access)                                             │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                            APPLICATION SECURITY                                     │  │
│  │  - CORS Configuration                                                               │  │
│  │  - Input Validation                                                                 │  │
│  │  - Rate Limiting                                                                    │  │
│  │  - JWT Authentication (Planned)                                                     │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                              DATA SECURITY                                          │  │
│  │  - EBS Encryption at Rest                                                           │  │
│  │  - HTTPS/TLS in Transit                                                             │  │
│  │  - SQLite File Permissions                                                          │  │
│  │  - HIPAA Compliance Ready                                                           │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                           │                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                            ACCESS MANAGEMENT                                        │  │
│  │  - IAM Roles & Policies                                                             │  │
│  │  - Least Privilege Access                                                           │  │
│  │  - Service-to-Service Authentication                                                │  │
│  │  - Audit Logging                                                                    │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              INFRASTRUCTURE AS CODE                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                           CloudFormation Stack                                      │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                        Network Resources                                    │  │  │
│  │  │  - VPC Creation                                                             │  │  │
│  │  │  - Subnet Configuration                                                     │  │  │
│  │  │  - Internet Gateway                                                         │  │  │
│  │  │  - Route Tables                                                             │  │  │
│  │  │  - Security Groups                                                          │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                        Compute Resources                                    │  │  │
│  │  │  - EC2 Instance (t3.micro)                                                 │  │  │
│  │  │  - EBS Volume                                                               │  │  │
│  │  │  - Elastic IP (Optional)                                                   │  │  │
│  │  │  - Key Pair                                                                 │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                        Storage Resources                                    │  │  │
│  │  │  - S3 Bucket (Frontend)                                                    │  │  │
│  │  │  - S3 Bucket Policy                                                        │  │  │
│  │  │  - CloudFront Distribution (Planned)                                       │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                          IAM Resources                                      │  │  │
│  │  │  - EC2 Instance Role                                                       │  │  │
│  │  │  - Bedrock Access Policy                                                   │  │  │
│  │  │  - S3 Access Policy                                                        │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## Cost Optimization Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                COST STRUCTURE                                              │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                            COMPUTE COSTS                                            │  │
│  │  EC2 t3.micro: ~$8.50/month                                                         │  │
│  │  - 1 vCPU, 1GB RAM                                                                  │  │
│  │  - 24/7 Operation                                                                   │  │
│  │  - Reserved Instance Savings: Up to 72%                                             │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                            STORAGE COSTS                                            │  │
│  │  S3 Standard: ~$1-2/month                                                           │  │
│  │  - Frontend Static Files                                                            │  │
│  │  - Low Request Volume                                                               │  │
│  │  EBS gp3: Included in EC2                                                           │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                              AI COSTS                                               │  │
│  │  AWS Bedrock: Pay-per-request                                                       │  │
│  │  - GPT-OSS-120B Model                                                               │  │
│  │  - Variable based on usage                                                          │  │
│  │  - Estimated: $5-20/month                                                           │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                          TOTAL ESTIMATED                                            │  │
│  │  Monthly Cost: $15-30                                                               │  │
│  │  Annual Cost: $180-360                                                              │  │
│  │  With Reserved Instances: $120-250                                                  │  │
│  └─────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## API Endpoints Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  API STRUCTURE                                             │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  Flask REST API (Port 5001)                                                                │
│  │                                                                                         │
│  ├── /api/patient/                                                                         │
│  │   ├── POST /register          → Patient Registration + AI Analysis                     │
│  │   ├── GET /{id}               → Get Patient Details                                    │
│  │   └── GET /                   → List All Patients                                      │
│  │                                                                                         │
│  ├── /api/claims/                                                                          │
│  │   ├── POST /process           → Process Claim + AI Validation                          │
│  │   ├── GET /{id}               → Get Claim Details                                      │
│  │   ├── GET /                   → List All Claims                                        │
│  │   ├── POST /{id}/approve      → Approve Claim                                          │
│  │   ├── POST /{id}/deny         → Deny Claim                                             │
│  │   └── PUT /{id}               → Update Claim                                           │
│  │                                                                                         │
│  ├── /api/eobs/                                                                            │
│  │   ├── GET /                   → List All EOBs                                          │
│  │   ├── POST /generate          → Generate EOB + AI Analysis                             │
│  │   ├── POST /{id}/analyze      → Analyze EOB                                            │
│  │   └── GET /{id}/pdf           → Download EOB PDF                                       │
│  │                                                                                         │
│  ├── /api/chatbot/                                                                         │
│  │   └── POST /query             → AI Chatbot Interaction                                 │
│  │                                                                                         │
│  └── /api/system/                                                                          │
│      ├── GET /health             → Health Check                                           │
│      ├── GET /agents/status      → AI Agent Status                                        │
│      └── GET /observability/metrics → System Metrics                                      │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

**Generated**: October 16, 2025  
**Based on**: ARCHITECTURE.md  
**AWS Region**: us-east-1  
**Environment**: Production-Ready Architecture